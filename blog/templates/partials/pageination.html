<nav class="my-5" aria-label="navigation">
  {% comment %} <div style="margin-left: 42%;" > {% endcomment %}
    <ul class="pagination d-inline-block d-md-flex justify-content-center">
    {% if page_obj.has_previous %}
    {% comment %} <a href="?page={{ page_obj.previous_page_number }}">قبلی</a> {% endcomment %}
    <li class="page-item">
      <a class="page-link active" href="?page={{ page_obj.previous_page_number }}" tabindex="-1" aria-disabled="true">قبلی</a>
    </li>
    {% if page_obj.number > 3 %}
    {% comment %} <a href="?page=1">1</a> {% endcomment %}
    <li class="page-item"><a class="page-link" href="?page=1">1</a></li>
    {% if page_obj.number > 4 %}
    <li class="page-item disabled"><a class="page-link" href="#">...</a></li>
    {% endif %}
    {% endif %}
    {% endif %}
    
    {% for num in page_obj.paginator.page_range %}
    {% if page_obj.number == num %}
    <li class="page-item">
      <a  class="page-link" href="?page={{ num }}">{{ num }}</a>
    </li>
    {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
    <li class="page-item">
      <a  class="page-link" href="?page={{ num }}">{{ num }}</a>
    </li>
    {% endif %}
    {% endfor %}
  
    {% if page_obj.has_next %}
    {% if page_obj.number < page_obj.paginator.num_pages|add:'-3' %}
      <span>...</span>
      <li class="page-item">
        <a  class="page-link" href="?page={{ page_obj.paginator.num_pages }}">{{ page_obj.paginator.num_pages }}</a>
      </li>
      {% elif page_obj.number < page_obj.paginator.num_pages|add:'-2' %}
      <li class="page-item">
        <a  class="page-link" href="?page={{ page_obj.paginator.num_pages }}">{{ page_obj.paginator.num_pages }}</a>
      </li>
    {% endif %}
    <li class="page-item">
      <a class="page-link" href="?page={{ page_obj.next_page_number }}">بعد</a>
    </li>
    {% comment %} <a href="?page={{ page_obj.next_page_number }}">Next Page »</a> {% endcomment %}
    {% endif %}
  </ul>
  {% comment %} </div> {% endcomment %}
</nav>